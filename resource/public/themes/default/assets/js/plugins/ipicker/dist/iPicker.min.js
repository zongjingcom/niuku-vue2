/*!
 * iPicker v1.0.0
 * Copyright (C) 2020, ZG
 * Released under the MIT license.
 */
!function (d, b) { "function" === typeof define && define.amd ? define(["jquery"], function (c) { return b(d, c) }) : "undefined" !== typeof module && "object" === typeof exports ? b(d, require("jquery")) : b(d, d.jQuery) }("undefined" !== typeof window ? window : this, function (d, b) { !function () { if ("undefined" === typeof jQuery) throw Error("iPicker's JavaScript requires jQuery"); var c = b.fn.jquery.split("."); if (1 === ~~c[0] && 9 > ~~c[1]) throw Error("iPicker's JavaScript requires jQuery version 1.9.0 or higher"); }(); b('style[data-from\x3d"iPicker"]').remove(); b("head").prepend('\x3cstyle data-from\x3d"iPicker"\x3e.iPicker-container,.iPicker-container *{box-sizing:border-box}.iPicker-container{position:relative;float:left;width:200px;height:36px;font-size:14px;font-weight:500;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.iPicker-container:not(:last-child){margin-right:10px}.iPicker-result{overflow:hidden;padding:0 40px 0 12px;height:36px;border:#dfdfdf solid 1px;border-radius:3px;background:#fff;color:#000;white-space:nowrap;line-height:34px;transition:border-color .2s}.iPicker-result span{display:block;float:left;width:calc(100% + 10px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iPicker-result-active:not(.iPicker-disabled),.iPicker-result:not(.iPicker-disabled):hover{border:#28b661 solid 1px}.iPicker-result i{position:absolute;top:0;right:0;display:block;width:30px;height:36px}.iPicker-result i::before{position:absolute;top:0;right:2px;display:block;width:28px;height:100%;background:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTc2OTk1MjQ3Njc4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI2NTAiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PC9zdHlsZT48L2RlZnM+PHBhdGggZD0iTTUzNS40NjY2NjcgODEyLjhsNDUwLjEzMzMzMy01NjMuMmMxNC45MzMzMzMtMTkuMiAyLjEzMzMzMy00OS4wNjY2NjctMjMuNDY2NjY3LTQ5LjA2NjY2N0g2MS44NjY2NjdjLTI1LjYgMC0zOC40IDI5Ljg2NjY2Ny0yMy40NjY2NjcgNDkuMDY2NjY3bDQ1MC4xMzMzMzMgNTYzLjJjMTIuOCAxNC45MzMzMzMgMzQuMTMzMzMzIDE0LjkzMzMzMyA0Ni45MzMzMzQgMHoiIHAtaWQ9IjI2NTEiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD48L3N2Zz4\x3d) center no-repeat;content:"";opacity:.5;transition:transform .3s;transform:scale(.55)}.iPicker-result-active i::before{transform:scale(.55) rotate(180deg)}.iPicker-placeholder{color:#808080}.iPicker-disabled{cursor:not-allowed;background:#f0f0f0;color:#aaa}.iPicker-result.iPicker-disabled i{opacity:.5}.iPicker-list{position:absolute;z-index:10;display:none;overflow-x:hidden;overflow-y:auto;padding:8px 0;max-height:300px;background-color:#fff;top:100%;border:1px solid #28b661;margin: -4px 0 0 0;box-shadow:rgba(0,0,0,.1) 0 2px 6px;transform-origin:center top;animation-timing-function:ease-in-out;animation-duration:.3s;animation-fill-mode:forwards}.iPicker-list li,.iPicker-list ul{display:block;margin:0;padding:0}.iPicker-list li{display:block;font-weight:normal;color:#808080;padding:6px 12px;list-style:none;transition:.15s;word-break:break-all}.iPicker-list li.iPicker-list-active,.iPicker-list li:hover{background:#f5f5f5;color:#28b661}.iPicker-list-active{cursor:default}.iPicker-list.iPicker-list-hide,.iPicker-list.iPicker-list-show{display:block}.iPicker-list.iPicker-list-show{animation-name:iPickerShow}.iPicker-list.iPicker-list-hide{animation-name:iPickerHide}@keyframes iPickerShow{from{opacity:0;transform:scaleY(0)}to{opacity:1;transform:scaleY(1)}}@keyframes iPickerHide{from{opacity:1;transform:scaleY(1)}to{opacity:0;transform:scaleY(0)}}\x3c/style\x3e'); b.fn.iPicker = function (c, d) { if (!arguments.length) { var k = []; b(this).first().find(".iPicker-result").each(function () { var a = (b(this).data("selected") || {}).value; a && k.push(a) }); return k } if ("clear" === c) return this.each(function () { b(this).find(".iPicker-container:gt(0) ul").empty().end().find("li").removeClass("iPicker-list-active").end().find(".iPicker-result").addClass("iPicker-placeholder").removeData("selected").find("span").each(function () { b(this).text(b(this).data("placeholder")) }) }); if ("reset" === c) return this.each(function () { var a = b(this).data("iPickerOptions"); b.isPlainObject(a) && !b.isEmptyObject(a) && b(this).iPicker(a) }); if ("destroy" === c) return this.each(function () { b(this).empty().removeData("iPickerOptions"); b(document).off("click.iPicker") }); if ("enabled" === c) return this.each(function () { var a = b(this).find(".iPicker-disabled"); d ? Array.isArray(d) && d.length && b.each(d, function (b, q) { a.eq(q - 1).removeClass("iPicker-disabled") }) : a.removeClass("iPicker-disabled") }); if (b.isPlainObject(c) && c.data) { var g = function (a) { a.each(function () { var a = b(this); if (a.hasClass("iPicker-list-show")) a.off("animationend").prev().removeClass("iPicker-result-active").end().addClass("iPicker-list-hide").removeClass("iPicker-list-show").on("animationend", function () { a.off("animationend") }) }) }, r = function () { "string" === typeof a.data && b.trim(a.data) ? b.getJSON(a.data).done(function (b) { b ? e.resolve(b) : e.reject("\u6570\u636e\u52a0\u8f7d\u5931\u8d25") }).fail(function () { e.reject("\u6570\u636e\u52a0\u8f7d\u5931\u8d25") }) : b.isPlainObject(a.data) && !b.isEmptyObject(a.data) ? e.resolve(a.data) : "object" === typeof a.data && a.data.then ? a.data.then(function (b) { b ? e.resolve(b) : e.reject("\u6570\u636e\u52a0\u8f7d\u5931\u8d25") }, function () { e.reject("\u6570\u636e\u52a0\u8f7d\u5931\u8d25") }) : e.reject("\u6570\u636e\u52a0\u8f7d\u5931\u8d25"); return e }, a = b.extend(!0, { data: {}, level: 3, width: 200, maxHeight: 300, disabled: !1, defaultValue: [], placeholder: ["\u7701", "\u5e02", "\u533a"], onSelect: b.noop }, c), t = b.isFunction(a.onSelect), l = ""; if (b.isNumeric(a.level) && 1 <= a.level && 4 > a.level) for (var m = 0; m < parseInt(a.level); m++)l += '\r\n\x3cdiv class\x3d"iPicker-container"\x3e\r\n\x3cdiv class\x3d"iPicker-result iPicker-placeholder"\x3e\r\n\x3cspan\x3e\x3c/span\x3e\r\n\x3ci\x3e\x3c/i\x3e\r\n\x3c/div\x3e\r\n\x3cdiv class\x3d"iPicker-list"\x3e\r\n\x3cul\x3e\x3c/ul\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n'; var e = b.Deferred(); return this.each(function () { var c = b(this), d = []; c.html(l).data("iPickerOptions", a); var e = c.find(".iPicker-container"), h = c.find(".iPicker-result"), f = c.find(".iPicker-list"); b.isNumeric(a.maxHeight) && 46 <= a.maxHeight && f.css("maxHeight", parseInt(a.maxHeight) + "px"); b.isNumeric(a.width) && 90 <= a.width && e.css("width", parseInt(a.width) + "px"); a.disabled && (c = [], !0 === a.disabled ? c = [0, 1, 2] : Array.isArray(a.disabled) && a.disabled.length && (c = a.disabled), b.each(c, function (b, a) { 0 <= a && 2 >= a && h.eq(a).addClass("iPicker-disabled") })); Array.isArray(a.placeholder) && a.placeholder.length && h.find("span").each(function (c) { c = a.placeholder[c] || ""; b(this).data("placeholder", c).text(c) }); f.each(function () { b(this).attr("data-id", Math.random().toString(36).substr(2, 10)) }); r().done(function (c) { function e(a, c) { var n = ""; a && (a = "string" === typeof a ? JSON.parse(a) : a, a[c] && b.each(a[c], function (a, b) { n += '\x3cli data-code\x3d"' + a + '"\x3e' + b + "\x3c/li\x3e" })); return n } h.on("click", function () { var a = b(this), c = a.next(), e = c.data("id"), d = a.hasClass("iPicker-disabled"); g(b(".iPicker-list").not('[data-id\x3d"' + e + '"]')); d || (a.toggleClass("iPicker-result-active"), c.hasClass("iPicker-list-show") ? g(c) : c.addClass("iPicker-list-show").removeClass("iPicker-list-hide")) }); f.on("click.normal", "li", function () { var a = b(this), d = a.parents(".iPicker-list"), p = a.parents(".iPicker-container"); a.addClass("iPicker-list-active").siblings().removeClass("iPicker-list-active"); d.prev().data("selected", { value: a.data("code"), text: a.text() }).removeClass("iPicker-placeholder").find("span").text(a.text()); g(d); p.nextAll().find(".iPicker-result").removeData("selected").addClass("iPicker-placeholder").find("span").each(function () { b(this).text(b(this).data("placeholder")) }).end().next().find("ul").empty(); p.next().find("ul").html(e(c, a.data("code"))) }).on("click.select", "li", function () { if (t) { var c = [], e = []; h.each(function () { var a = b(this).data("selected") || {}, d = a.value, a = a.text; d && c.push(d); a && e.push(a) }); d = []; b.each(c, function (a, b) { d.push({ value: a, text: b }) }); a.onSelect.call(this, c, e, d) } }); f.first().find("ul").html(e(c, "86")); Array.isArray(a.defaultValue) && a.defaultValue.length && b.each(a.defaultValue, function (a, b) { f.eq(a).find('[data-code\x3d"' + b + '"]').trigger("click.normal") }) }).fail(function (a) { console.warn(a) }); b(document).on("click.iPicker", function (a) { e.is(a.target) || e.has(a.target).length || g(f) }) }) } } });